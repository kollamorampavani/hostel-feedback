<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hostel Food Feedback</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f9f9f9, #e6f7ff);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      margin: 0;
      padding: 40px 10px;
    }

    .container {
      background: #fff;
      padding: 30px 35px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 420px;
      text-align: center;
    }

    h2 {
      color: #0078D7;
      margin-bottom: 15px;
    }

    label {
      display: block;
      text-align: left;
      margin-top: 12px;
      font-weight: 500;
      color: #333;
    }

    select, input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
      outline: none;
      transition: border-color 0.3s;
    }

    select:focus, input[type="text"]:focus {
      border-color: #0078D7;
    }

    .menu-box {
      background: #f0f8ff;
      padding: 12px;
      border-radius: 10px;
      margin-top: 15px;
      color: #333;
      font-size: 14px;
      text-align: left;
      display: none;
    }

    .radio-group {
      text-align: left;
      margin-top: 8px;
    }

    .radio-group input {
      margin-right: 5px;
    }

    button {
      background-color: #0078D7;
      color: white;
      border: none;
      padding: 10px 18px;
      margin-top: 20px;
      border-radius: 10px;
      font-size: 15px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #005fa3;
      transform: translateY(-1px);
    }

    .secondary-btn {
      background-color: #34a853;
    }

    .secondary-btn:hover {
      background-color: #2b8a42;
    }

    section.about {
      background: #ffffff;
      padding: 20px;
      border-radius: 12px;
      margin: 35px auto 10px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
      text-align: left;
      max-width: 800px;
    }

    section.about h2 {
      color: #0078D7;
      margin-top: 0;
    }

    ul {
      margin-top: 10px;
      padding-left: 20px;
    }

    .footer-note {
      font-size: 12px;
      color: #777;
      margin-top: 20px;
    }
  </style>
</head>

<body>
  <div class="container">
    <h2>üçΩÔ∏è Student Food Feedback</h2>
    <form id="feedbackForm">
      <label>Student ID:</label>
      <input type="text" id="studentId" required>

      <label>Select Day:</label>
      <select id="daySelect" required>
        <option value="">-- Select Day --</option>
        <option>Monday</option>
        <option>Tuesday</option>
        <option>Wednesday</option>
        <option>Thursday</option>
        <option>Friday</option>
        <option>Saturday</option>
        <option>Sunday</option>
      </select>

      <label>Select Meal:</label>
      <select id="mealType" required>
        <option value="">-- Select Meal --</option>
        <option>Breakfast</option>
        <option>Lunch</option>
        <option>Dinner</option>
      </select>

      <div id="menuBox" class="menu-box"></div>

      <label>Did you like it?</label>
      <div class="radio-group">
        <input type="radio" name="liked" value="1" required> Yes  
        <input type="radio" name="liked" value="0"> No
      </div>

      <label>If No, what do you prefer instead?</label>
      <input type="text" id="suggestion" placeholder="e.g. Paneer Curry">

      <button type="submit">Submit Feedback</button>
    </form>

    <button class="secondary-btn" onclick="window.location.href='report.html'">üìä View Reports</button>

    <div class="footer-note">¬© 2025 Student Mess Feedback Portal</div>
  </div>

  <section class="about">
    <h2>About This Website</h2>
    <p>
      The <strong>Hostel Menu Feedback Dashboard</strong> allows students to share their opinions on hostel meals. 
      Students can like or dislike dishes, suggest alternatives, and view reports of collective feedback.
      This helps hostel management understand student preferences and improve food quality.
    </p>

    <h3>Key Features</h3>
    <ul>
      <li>Interactive charts for meal feedback.</li>
      <li>Day-wise and meal-type filters.</li>
      <li>Food suggestion visualization.</li>
    </ul>
  </section>

  <script>
    // ü•ó Hostel Menu Data
    const menu = {
      Monday: {
        Breakfast: "Chapathi, Aloo Curry, Chutney",
        Lunch: "Rice, Dal, Rasam, Curd",
        Dinner: "Gobi Rice / Tomato Rice, Curd Rice"
      },
      Tuesday: {
        Breakfast: "Uthappam, Chutney",
        Lunch: "Rice, Dal, Rasam, Curd",
        Dinner: "Rice, Sambar, Rasam, Aloo Chips / Egg Curry"
      },
      Wednesday: {
        Breakfast: "Upma, Chutney",
        Lunch: "Rice, Dal, Rasam, Curd",
        Dinner: "Chapathi, Curd Rice, Chana Dal Curry / Chicken Curry"
      },
      Thursday: {
        Breakfast: "Pongal / Uggani, Bajji",
        Lunch: "Color Rice, Aloo Curry, Raitha",
        Dinner: "Rice, Dal, Rasam, Curd"
      },
      Friday: {
        Breakfast: "Poori, Aloo Curry, Chutney",
        Lunch: "Rice, Dal, Rasam, Curd",
        Dinner: "Vegetable Rice / Egg Rice"
      },
      Saturday: {
        Breakfast: "Idli, Chutney, Sambar",
        Lunch: "Sweet, Rice, Dal, Rasam, Curd",
        Dinner: "Pulihora / Lemon Rice"
      },
      Sunday: {
        Breakfast: "Dosa, Chutney, Aloo Fry",
        Lunch: "Bagara Rice, Chicken Curry",
        Dinner: "Rice, Dal, Rasam, Curd"
      }
    };

    const daySelect = document.getElementById("daySelect");
    const mealSelect = document.getElementById("mealType");
    const menuBox = document.getElementById("menuBox");

    // Show menu automatically when day/meal changes
    function updateMenu() {
      const day = daySelect.value;
      const meal = mealSelect.value;
      if (day && meal && menu[day] && menu[day][meal]) {
        menuBox.style.display = "block";
        menuBox.innerHTML = `<strong>${meal} Menu:</strong> ${menu[day][meal]}`;
      } else {
        menuBox.style.display = "none";
      }
    }

    daySelect.addEventListener("change", updateMenu);
    mealSelect.addEventListener("change", updateMenu);

    // Submit feedback to backend
    document.getElementById("feedbackForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const data = {
        student_id: document.getElementById("studentId").value,
        day: daySelect.value,
        meal_type: mealSelect.value,
        liked: document.querySelector("input[name='liked']:checked").value,
        suggestion: document.getElementById("suggestion").value
      };

      try {
        await fetch("http://localhost:3000/submit-feedback", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });
        alert("‚úÖ Feedback submitted successfully!");
      } catch {
        alert("‚ö†Ô∏è Could not connect to server (only works locally).");
      }

      document.getElementById("feedbackForm").reset();
      menuBox.style.display = "none";
    });
  </script>
</body>
</html>
